# Лабораторная работа №2

Автор: Лиганкина Анна ИУ9-51Б

## Задание

Дано академическое регулярное выражение:

$$
(aa|bb|cc)^* b(aaa|bbb)^* ((ab|bc|ccc)^* aa)^* abc(a|b|c)(b|\varepsilon)
$$

По нему необходимо построить:

- **минимальный ДКА**, распознающий его язык (минимальность обосновать таблицей классов эквивалентности);

- **возможно малый НКА**, распознающий его язык. Частично обосновать таблицами множеств классов эквивалентности;

- **возможно малый переключающийся (с конъюнкцией) КА**, распознающий его язык. Частично обосновать таблицами множеств классов эквивалентности;

- **расширенное регулярное выражение**, распознающее тот же язык.

Провести автоматическое **тестирование** предполагаемой эквивалентности построенных распознавателей. Тем самым необходимо построить алгоритмы, определяющие принадлежность слова языку академического регулярного выражения, ДКА, НКА и ПКА.

## Реализация

### НКА

Построим НКА при помощи линеаризации исходного регулярного выражения:

$$
    (a_1a_2|b_3b_4|c_5c_6)^* b_7(a_8a_9a_{10}|b_{11}b_{12}b_{13})^*
    ((a_{14}b_{15}|b_{16}c_{17}|c_{18}c_{19}c_{20})^* a_{21}a_{22})^*
    a_{23}b_{24}c_{25}(a_{26}|b_{27}|c_{28})(b_{29}|\varepsilon)
$$

<img src="img/NFA.png" width="1000" alt="NFA"/>

Получившийся автомат в [файле `NFA.dot`](img/NFA.dot).

После уменьшения количества состояний возможно малый НКА выглядит так:
<img src="img/NFA_min.png" width="1000" alt="NFA_min"/>

Получившийся автомат в [файле `NFA_min.dot`](img/NFA_min.dot).

Частичное обоснование минимальности:
| q  | prefix  | abca | aaabca | aaaaabca | aaaabca | abaaabca | bca | baababca | ca | caaabca | cbabca | aababca | a | bbabca | babca | b | ε | baaabca |
|----|---------|------|--------|----------|---------|----------|-----|----------|----|---------|--------|---------|---|--------|-------|---|---|---------|
| 7  | aab     |  +   |   +    |    +     |    +    |    +     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 15 | bab     |  -   |   +    |    +     |    -    |    +     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 9  | baa     |  -   |   -    |    +     |    +    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 21 | baba    |  -   |   -    |    -     |    +    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 1  | a       |  -   |   -    |    -     |    -    |    +     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 23 | baaaa   |  -   |   -    |    -     |    -    |    -     |  +  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 3  | b       |  -   |   -    |    -     |    -    |    -     |  -  |    +     | -  |    -    |   -    |    -    | - |   +    |   -   | - | - |    -    |
| 24 | baaaab  |  -   |   -    |    -     |    -    |    -     |  -  |    -     | +  |    -    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 16 | baaab   |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    +    |   -    |    -    | - |   -    |   -   | - | - |    -    |
| 5  | c       |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   +    |    -    | - |   -    |   -   | - | - |    -    |
| 0  | ε       |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    +    | - |   -    |   +   | - | - |    +    |
| 25 | babc    |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | + |   -    |   -   | + | - |    -    |
| 11 | bb      |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   +    |   -   | - | - |    -    |
| 12 | bbb     |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   +   | - | - |    +    |
| 26 | babca   |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | + | + |    -    |
| 29 | babcab  |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | + |    -    |
| 14 | ba      |  -   |   -    |    -     |    -    |    -     |  -  |    -     | -  |    -    |   -    |    -    | - |   -    |   -   | - | - |    +    |

### ДКА

Детерминизуем и минимизируем возможно малый НКА и получим
<img src="img/DFA_min.png" width="1000" alt="DFA_min"/>

Получившийся автомат в [файле `DFA_min.dot`](img/DFA_min.dot).

Обоснование минимальности:
| q  | prefix       | ε | a | b | ca | bca | abca | aabca | babca | aaabca | ababca | bbabca | aaaabca | aababca | bbbabca | caaabca | baaaabca | ccaaabca | abaaaabca | bbaaaabca | cbaaaabca | aabaaaabca | bbbaaaabca | ccbaaaabca | abbbaaaabca | bccbaaaabca | aabbbaaaabca | aaabbbaaaabca |
|----|--------------|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
| 0  | ε            | - | - | - | - | - | - | - | + | - | - | - | - | + | + | - | + | - | - | - | - | + | + | + | - | - | + | - |
| 1  | bcc          | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - |
| 10 | bbbbaaaab    | - | - | - | + | - | + | - | - | + | - | + | + | - | + | + | - | - | - | + | - | - | + | - | - | + | - | + |
| 11 | bb           | - | - | - | - | - | - | - | + | - | - | + | - | + | + | + | + | - | - | + | - | + | + | + | - | - | + | - |
| 12 | bbb          | - | - | - | - | - | + | - | + | + | - | + | + | - | + | - | + | - | - | + | - | - | + | - | - | + | - | + |
| 13 | bbbbaaa      | - | - | - | - | + | + | + | - | + | + | - | + | - | + | - | - | - | + | - | - | - | + | - | + | - | - | + |
| 14 | baaa         | - | - | - | - | + | + | + | - | + | - | - | + | - | + | - | - | - | - | - | - | - | + | - | - | - | - | + |
| 15 | a            | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | + | - | - | - | - | - | + | - | - | + |
| 16 | b            | - | - | - | - | - | + | - | - | + | - | + | + | - | + | - | - | - | - | + | - | - | + | - | - | + | - | + |
| 17 | c            | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - |
| 19 | ba           | - | - | - | - | + | - | + | - | + | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - |
| 2  | bccc         | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 20 | bc           | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - |
| 21 | baba         | - | - | - | - | - | - | + | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 22 | babaa        | - | - | - | - | - | + | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 23 | babaaa       | - | - | - | - | + | - | + | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 24 | bab          | - | - | - | + | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 25 | babc         | - | + | + | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - |
| 26 | babcab       | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 27 | bbcc         | - | - | - | - | - | - | - | + | - | - | - | - | + | + | - | + | + | - | - | - | + | + | + | - | - | + | - |
| 28 | bbccc        | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | + | - | - | - | - | - | - | - |
| 29 | bbcccc       | - | - | - | - | - | - | - | + | + | - | - | - | + | + | - | + | - | - | - | - | + | + | + | - | - | + | - |
| 3  | babca        | + | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 30 | bbcccca      | - | - | - | - | - | - | + | - | - | + | - | + | - | - | - | - | - | + | - | - | - | - | - | + | - | - | + |
| 31 | bbbbaab      | - | - | - | - | - | + | - | - | + | - | + | + | - | + | + | - | - | - | + | - | - | + | - | - | + | - | + |
| 32 | bbbbaac      | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | - | + | - | - | - | - | - | - | - |
| 33 | bbbbaacc     | - | - | - | - | - | - | - | + | - | - | - | - | + | + | + | + | - | - | - | - | + | + | + | - | - | + | - |
| 34 | bbbbbcc      | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | + | - | - | - | - | - | - | - | - | - | - |
| 35 | baaabccc     | - | - | - | - | - | - | - | - | + | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - |
| 36 | bbccccaa     | - | - | - | - | - | + | - | + | + | - | - | - | + | + | - | + | - | - | - | - | + | + | + | - | - | + | - |
| 37 | bbccccaaa    | - | - | - | - | + | - | + | - | - | + | - | + | - | - | - | - | - | + | - | - | - | - | - | + | - | - | + |
| 38 | bbbba        | - | - | - | - | + | - | + | - | + | + | - | + | - | - | - | - | - | + | - | - | - | - | - | + | - | + | + |
| 39 | bbbbcc       | - | - | - | - | - | - | - | + | - | - | - | - | + | + | + | + | + | - | - | - | + | + | + | - | - | + | - |
| 4  | bbc          | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - |
| 40 | bbbbccc      | - | - | - | - | - | - | - | - | + | - | - | - | - | - | + | - | - | - | - | + | - | - | - | - | - | - | - |
| 41 | bbbbcccc     | - | - | - | - | - | - | - | + | + | - | - | - | + | + | - | + | + | - | - | - | + | + | + | - | - | + | - |
| 42 | bbbbccccc    | - | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - | + | - | - | + | - | - | - | - | - | - | - |
| 43 | bbbbcccccc   | - | - | - | - | - | - | - | + | + | - | - | - | + | + | + | + | - | - | - | - | + | + | + | - | - | + | - |
| 44 | bbbbaa       | - | - | - | - | - | + | + | + | + | - | - | + | + | + | - | + | - | - | - | - | + | + | + | + | - | + | - |
| 45 | bbbbaaaa     | - | - | - | - | + | + | + | + | + | - | - | + | + | + | - | + | - | - | - | - | + | + | + | - | - | + | - |
| 46 | baaab        | - | - | - | + | - | - | - | - | + | - | + | - | - | - | + | - | - | - | + | - | - | - | - | - | - | - | - |
| 47 | baaabb       | - | - | - | - | - | - | - | + | - | - | - | - | - | - | + | + | - | - | - | - | - | - | - | - | - | - | - |
| 48 | baaabc       | - | + | + | - | - | - | - | - | + | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - |
| 49 | baaabca      | + | - | + | - | - | - | + | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 5  | bbbbbc       | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - |
| 50 | baaabcc      | + | - | + | - | - | - | - | - | - | - | - | - | - | - | + | - | + | - | - | - | - | - | - | - | - | - | - |
| 51 | baaabcab     | + | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |
| 52 | baaabbb      | - | - | - | - | - | + | - | - | + | - | - | + | - | + | - | - | - | - | - | - | - | + | - | - | - | - | + |
| 53 | baaabbbb     | - | - | - | - | - | - | - | - | - | - | + | - | - | - | + | - | - | - | + | - | - | - | - | - | - | - | - |
| 54 | baaabbbbb    | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - |
| 55 | bbbbaaaaa    | - | - | - | - | + | + | + | - | + | + | - | + | - | - | - | - | - | + | - | - | - | - | - | + | - | - | + |
| 56 | bbbbaaaaaa   | - | - | - | - | + | + | + | + | + | - | - | + | + | + | - | + | - | - | - | - | + | + | + | - | - | + | + |
| 57 | baaaab       | - | - | - | + | - | - | - | - | + | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - |
| 58 | bbbbaaaaaaa  | - | - | - | - | + | + | + | - | + | + | - | + | - | - | - | - | - | + | - | - | - | - | - | + | - | + | + |
| 59 | bbbbaaaaaaaa | - | - | - | - | + | + | + | + | + | - | - | + | + | + | - | + | - | - | - | - | + | + | + | + | - | + | - |
| 6  | bbbbc        | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | + | - | - | + | - | - | - | - | - | - | - |
| 60 | baa          | - | - | - | - | - | + | + | - | + | - | - | + | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - |
| 61 | baaaa        | - | - | - | - | + | + | + | - | + | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - | - | + | - |
| 62 | baaaaa       | - | - | - | - | + | + | + | - | + | - | - | + | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - |
| 7  | bbbb         | - | - | - | - | - | + | - | + | + | - | + | + | + | + | + | + | - | - | + | - | + | + | + | - | - | + | + |
| 8  | bbbbb        | - | - | - | - | - | + | - | + | + | - | + | + | - | + | + | + | - | - | + | - | - | + | - | - | + | - | + |
| 9  | babcc        | + | - | + | - | - | - | - | - | - | - | - | - | - | - | + | - | - | - | - | - | - | - | - | - | - | - | - |
| T  | ab           | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - | - |

### ПКА

Т.к. исходное регулярное выражение можно представить в виде пересечения двух регулярных выражений
$$
    (aa|bb|cc)^* b(a|b)^* ((ab|bc|ccc)^* aa)^* abc(a|b|c)(b|)
$$
$$
    (aa|bb|cc)^* b(aaa|bbb)^* ((ab|bc|ccc)^* aa)^* ab(a|b|c|)(a|b|c|)(a|b|c|)", 
$$
то возможно построить следующий ПКА:
<img src="img/AFA.png" width="1000" alt="AFA"/>

Получившийся автомат в [файле `AFA.dot`](img/AFA.dot).

Частичное обоснование минимальности:
| prefix    | ε | ca | caaabca | bbabca | aaabbbaaaabca | bbbabca | aaaabca | abca | aaabca |
|-----------|---|----|---------|--------|---------------|---------|---------|------|--------|
| bbbbaaaab | - | +  |    +    |   +    |       +       |    +    |    +    |  +   |   +    |
| bbbbb     | - | -  |    +    |   +    |       +       |    +    |    +    |  +   |   +    |
| bbb       | - | -  |    -    |   +    |       +       |    +    |    +    |  +   |   +    |
| baaa      | - | -  |    -    |   -    |       +       |    +    |    +    |  +   |   +    |
| bbbbaa    | - | -  |    -    |   -    |       -       |    +    |    +    |  +   |   +    |
| baa       | - | -  |    -    |   -    |       -       |    -    |    +    |  +   |   +    |
| babaa     | - | -  |    -    |   -    |       -       |    -    |    -    |  +   |   +    |
| bccc      | - | -  |    -    |   -    |       -       |    -    |    -    |  -   |   +    |
| c         | - | -  |    -    |   -    |       -       |    -    |    -    |  -   |   -    |

### Расширенное регулярное выражение

Исходя из структуры академического регулярного выражения, эквивалентным ему является расширенное регулярное выражение

$$
^\wedge (aa|bb|cc)^* b(aaa|bbb)^* ((ab|bc|ccc)^* aa)^* abc.b?\$,
$$

где $(a|b|c)$ по определению заменено на $.$, а $(b|\varepsilon)$ - на $b?$.

## Фазз-тестирование

Код для фазз-тестирования в [файле `fuzzer.hs`](/fuzzer.hs).

Для запуска:

```bash
ghc -package regex-tdfa fuzzer.hs
./fuzzer
```